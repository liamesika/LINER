// Linear Algebra Past Exams Data
// Based on LINER/PAST_EXAMS folder

import type { ExamData, ExamQuestion, LinearAlgebraTopic } from '@/types'

export const examQuestions: ExamQuestion[] = [
  // 2022-23 Moed A
  {
    id: 'exam-2022-23-A-q1',
    question: 'Let V be a vector space over F and let W₁, W₂ be subspaces of V. Prove that W₁ ∪ W₂ is a subspace of V if and only if W₁ ⊆ W₂ or W₂ ⊆ W₁.',
    source: 'LA1_2022-23_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'subspaces',
    weekNumber: 2,
    difficulty: 'medium',
    relatedTheorems: ['thm-intersection-subspace'],
    relatedDefinitions: ['def-subspace'],
    examYear: '2022-23',
    examSession: 'A',
    questionNumber: 1,
    points: 15,
    solution: 'If W₁ ⊆ W₂ or W₂ ⊆ W₁, then W₁ ∪ W₂ equals the larger subspace. Conversely, assume W₁ ∪ W₂ is a subspace and neither is contained in the other. Then ∃u ∈ W₁\\W₂ and ∃v ∈ W₂\\W₁. Consider u + v ∈ W₁ ∪ W₂. If u + v ∈ W₁, then v = (u+v) - u ∈ W₁, contradiction. Similarly if u + v ∈ W₂.',
  },
  {
    id: 'exam-2022-23-A-q2',
    question: 'Let T: ℝ³ → ℝ² be defined by T(x,y,z) = (x+y, y+z). Find a basis for ker(T) and a basis for Im(T). Verify the rank-nullity theorem.',
    source: 'LA1_2022-23_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'other',
    weekNumber: 5,
    difficulty: 'medium',
    relatedTheorems: ['thm-rank-nullity'],
    relatedDefinitions: ['def-kernel', 'def-image', 'def-linear-transformation'],
    examYear: '2022-23',
    examSession: 'A',
    questionNumber: 2,
    points: 20,
    solution: 'ker(T) = {(x,y,z) : x+y=0, y+z=0} = Sp{(1,-1,1)}. Im(T) = Sp{(1,0), (1,1)} = ℝ². dim(ℝ³) = 3 = rank(T) + nullity(T) = 2 + 1.',
  },
  {
    id: 'exam-2022-23-A-q3',
    question: 'Let A = [[2,1,0],[0,2,1],[0,0,2]]. (a) Find the characteristic polynomial. (b) Find all eigenvalues and their algebraic multiplicities. (c) For each eigenvalue, find the eigenspace and geometric multiplicity. (d) Is A diagonalizable?',
    source: 'LA1_2022-23_MoedA_Eng.pdf',
    pageNumber: 2,
    topic: 'other',
    weekNumber: 10,
    difficulty: 'hard',
    relatedTheorems: ['thm-diagonalization-criterion'],
    relatedDefinitions: ['def-eigenvalue', 'def-characteristic-polynomial', 'def-algebraic-geometric-mult'],
    examYear: '2022-23',
    examSession: 'A',
    questionNumber: 3,
    points: 25,
    solution: 'p(λ) = (2-λ)³. λ=2 with algebraic multiplicity 3. E₂ = ker(A-2I) = Sp{(1,0,0)}, geometric multiplicity 1. Since 1 ≠ 3, A is not diagonalizable.',
  },
  {
    id: 'exam-2022-23-A-q4',
    question: 'Apply the Gram-Schmidt process to {(1,1,0), (1,0,1), (0,1,1)} in ℝ³ with the standard inner product.',
    source: 'LA1_2022-23_MoedA_Eng.pdf',
    pageNumber: 2,
    topic: 'other',
    weekNumber: 13,
    difficulty: 'medium',
    relatedTheorems: ['thm-gram-schmidt'],
    relatedDefinitions: ['def-inner-product', 'def-orthogonal'],
    examYear: '2022-23',
    examSession: 'A',
    questionNumber: 4,
    points: 20,
    solution: 'u₁ = (1,1,0)/√2. w₂ = (1,0,1) - ⟨(1,0,1), u₁⟩u₁ = (1/2, -1/2, 1), u₂ = w₂/‖w₂‖. w₃ = (0,1,1) - projections, u₃ = w₃/‖w₃‖.',
  },
  // 2022-23 Moed B
  {
    id: 'exam-2022-23-B-q1',
    question: 'Let V = F[x]₂ (polynomials of degree ≤ 2) and let T: V → V be defined by T(p) = p\' (derivative). Find [T] with respect to the basis B = {1, x, x²}.',
    source: 'LA1_2022-23_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'matrices',
    weekNumber: 6,
    difficulty: 'medium',
    relatedTheorems: [],
    relatedDefinitions: ['def-matrix-representation', 'def-linear-transformation'],
    examYear: '2022-23',
    examSession: 'B',
    questionNumber: 1,
    points: 15,
    solution: 'T(1) = 0, T(x) = 1, T(x²) = 2x. So [T]_B = [[0,1,0],[0,0,2],[0,0,0]].',
  },
  {
    id: 'exam-2022-23-B-q2',
    question: 'Let A be an n×n matrix with rank(A) = r. Prove that rank(A²) ≤ r.',
    source: 'LA1_2022-23_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'rank',
    weekNumber: 7,
    difficulty: 'medium',
    relatedTheorems: ['thm-rank-nullity'],
    relatedDefinitions: ['def-rank', 'def-image'],
    examYear: '2022-23',
    examSession: 'B',
    questionNumber: 2,
    points: 15,
    solution: 'Im(A²) = A(Im(A)) ⊆ Im(A). So rank(A²) = dim(Im(A²)) ≤ dim(Im(A)) = rank(A).',
  },
  // 2023-24 Moed A
  {
    id: 'exam-2023-24-A-q1',
    question: 'Let V be a finite-dimensional vector space and T: V → V a linear operator. Prove that if T² = T, then V = ker(T) ⊕ Im(T).',
    source: 'LA1_2023-24_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'other',
    weekNumber: 5,
    difficulty: 'hard',
    relatedTheorems: ['thm-rank-nullity'],
    relatedDefinitions: ['def-kernel', 'def-image'],
    examYear: '2023-24',
    examSession: 'A',
    questionNumber: 1,
    points: 20,
    solution: 'For any v ∈ V, v = (v - T(v)) + T(v). T(v-T(v)) = T(v) - T²(v) = T(v) - T(v) = 0, so v-T(v) ∈ ker(T). And T(v) ∈ Im(T). If w ∈ ker(T) ∩ Im(T), then w = T(u) for some u, and T(w) = 0. So T²(u) = 0, but T²(u) = T(u) = w, so w = 0.',
  },
  {
    id: 'exam-2023-24-A-q2',
    question: 'Find the determinant of the n×n matrix A where aᵢⱼ = min(i,j).',
    source: 'LA1_2023-24_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'determinants',
    weekNumber: 9,
    difficulty: 'hard',
    relatedTheorems: ['thm-det-row-ops'],
    relatedDefinitions: ['def-determinant'],
    examYear: '2023-24',
    examSession: 'A',
    questionNumber: 2,
    points: 20,
    solution: 'Row reduce: Rᵢ → Rᵢ - Rᵢ₋₁ for i = n,...,2. This gives det = 1.',
  },
  {
    id: 'exam-2023-24-A-q3',
    question: 'Let A = [[1,2],[2,1]]. (a) Find all eigenvalues and eigenvectors. (b) Diagonalize A. (c) Compute A¹⁰.',
    source: 'LA1_2023-24_MoedA_Eng.pdf',
    pageNumber: 2,
    topic: 'other',
    weekNumber: 11,
    difficulty: 'medium',
    relatedTheorems: ['thm-diagonalization-criterion', 'thm-powers-diagonal'],
    relatedDefinitions: ['def-diagonalizable', 'def-eigenvalue'],
    examYear: '2023-24',
    examSession: 'A',
    questionNumber: 3,
    points: 25,
    solution: 'p(λ) = (1-λ)² - 4 = λ² - 2λ - 3 = (λ-3)(λ+1). λ₁=3: v₁=(1,1). λ₂=-1: v₂=(1,-1). P = [[1,1],[1,-1]], D = [[3,0],[0,-1]]. A¹⁰ = PD¹⁰P⁻¹.',
  },
  // 2023-24 Moed B
  {
    id: 'exam-2023-24-B-q1',
    question: 'Let W = {(x,y,z,w) ∈ ℝ⁴ : x + y = z + w}. Find a basis for W and determine dim(W).',
    source: 'LA1_2023-24_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'basis',
    weekNumber: 4,
    difficulty: 'easy',
    relatedTheorems: ['thm-extend-to-basis'],
    relatedDefinitions: ['def-basis', 'def-dimension', 'def-subspace'],
    examYear: '2023-24',
    examSession: 'B',
    questionNumber: 1,
    points: 15,
    solution: 'x + y - z - w = 0. Free variables: y, z, w. Basis: {(−1,1,0,0), (1,0,1,0), (1,0,0,1)}. dim(W) = 3.',
  },
  {
    id: 'exam-2023-24-B-q2',
    question: 'Let T: ℝ³ → ℝ³ be the reflection through the plane x + y + z = 0. Find [T] with respect to the standard basis.',
    source: 'LA1_2023-24_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'matrices',
    weekNumber: 6,
    difficulty: 'hard',
    relatedTheorems: [],
    relatedDefinitions: ['def-matrix-representation', 'def-orthogonal-projection'],
    examYear: '2023-24',
    examSession: 'B',
    questionNumber: 2,
    points: 20,
    solution: 'T(v) = v - 2proj_n(v) where n = (1,1,1)/√3. [T] = I - 2nnᵀ = [[1/3,-2/3,-2/3],[-2/3,1/3,-2/3],[-2/3,-2/3,1/3]].',
  },
  // 2024-25 Moed A
  {
    id: 'exam-2024-25-A-q1',
    question: 'Let V be a vector space with dim(V) = n. Prove that any n+1 vectors in V are linearly dependent.',
    source: 'LA1_2024-25_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'dimension',
    weekNumber: 4,
    difficulty: 'easy',
    relatedTheorems: ['thm-steinitz-exchange'],
    relatedDefinitions: ['def-dimension', 'def-linear-independence'],
    examYear: '2024-25',
    examSession: 'A',
    questionNumber: 1,
    points: 10,
    solution: 'By Steinitz exchange lemma: if vectors are independent, their count ≤ size of any spanning set. Any basis has n elements, so we cannot have n+1 independent vectors.',
  },
  {
    id: 'exam-2024-25-A-q2',
    question: 'Let A and B be similar matrices. Prove that Aᵏ and Bᵏ are similar for all positive integers k.',
    source: 'LA1_2024-25_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'basis',
    weekNumber: 6,
    difficulty: 'medium',
    relatedTheorems: ['thm-similar-matrices'],
    relatedDefinitions: ['def-change-of-basis'],
    examYear: '2024-25',
    examSession: 'A',
    questionNumber: 2,
    points: 15,
    solution: 'B = P⁻¹AP implies Bᵏ = P⁻¹AᵏP by induction. So Aᵏ and Bᵏ are similar via the same P.',
  },
  {
    id: 'exam-2024-25-A-q3',
    question: 'Find all values of a ∈ ℝ for which A = [[a,1,0],[1,a,1],[0,1,a]] is invertible.',
    source: 'LA1_2024-25_MoedA_Eng.pdf',
    pageNumber: 1,
    topic: 'determinants',
    weekNumber: 9,
    difficulty: 'medium',
    relatedTheorems: ['thm-det-inverse'],
    relatedDefinitions: ['def-determinant'],
    examYear: '2024-25',
    examSession: 'A',
    questionNumber: 3,
    points: 15,
    solution: 'det(A) = a(a² - 1) - 1(a) = a³ - 2a. A is invertible iff det(A) ≠ 0, i.e., a(a² - 2) ≠ 0, so a ≠ 0 and a ≠ ±√2.',
  },
  {
    id: 'exam-2024-25-A-q4',
    question: 'Find the least squares solution to the system: x + y = 1, x - y = 2, 2x + y = 0.',
    source: 'LA1_2024-25_MoedA_Eng.pdf',
    pageNumber: 2,
    topic: 'other',
    weekNumber: 13,
    difficulty: 'medium',
    relatedTheorems: ['thm-least-squares'],
    relatedDefinitions: [],
    examYear: '2024-25',
    examSession: 'A',
    questionNumber: 4,
    points: 20,
    solution: 'A = [[1,1],[1,-1],[2,1]], b = (1,2,0). AᵀA = [[6,2],[2,3]], Aᵀb = (3,-1). Solve AᵀAx = Aᵀb to get x = (11/14, -9/14).',
  },
  // 2024-25 Moed B
  {
    id: 'exam-2024-25-B-q1',
    question: 'Let T: V → W be a linear transformation. Prove that T is surjective if and only if Im(T) = W.',
    source: 'LA1_2024-25_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'other',
    weekNumber: 5,
    difficulty: 'easy',
    relatedTheorems: [],
    relatedDefinitions: ['def-image', 'def-linear-transformation'],
    examYear: '2024-25',
    examSession: 'B',
    questionNumber: 1,
    points: 10,
    solution: 'By definition, T is surjective iff every w ∈ W has a preimage, which is exactly the definition of Im(T) = W.',
  },
  {
    id: 'exam-2024-25-B-q2',
    question: 'Prove that det(adj(A)) = (det(A))ⁿ⁻¹ for an n×n invertible matrix A.',
    source: 'LA1_2024-25_MoedB_Eng.pdf',
    pageNumber: 1,
    topic: 'determinants',
    weekNumber: 9,
    difficulty: 'hard',
    relatedTheorems: ['thm-det-product'],
    relatedDefinitions: ['def-determinant'],
    examYear: '2024-25',
    examSession: 'B',
    questionNumber: 2,
    points: 20,
    solution: 'A·adj(A) = det(A)·I. Taking determinants: det(A)·det(adj(A)) = det(A)ⁿ. If det(A) ≠ 0, divide to get det(adj(A)) = det(A)ⁿ⁻¹.',
  },
]

export const examsData: ExamData[] = [
  {
    id: 'exam-2022-23-A',
    year: '2022-23',
    session: 'A',
    language: 'eng',
    sourceFile: 'LA1_2022-23_MoedA_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2022-23' && q.examSession === 'A'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 1, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 0, 'dimension': 0, 'matrices': 0, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 0,
      'rank': 0, 'row-column-space': 0, 'other': 3
    },
    difficultyDistribution: { easy: 0, medium: 3, hard: 1 },
    totalPoints: 80,
    hasSolution: true,
  },
  {
    id: 'exam-2022-23-B',
    year: '2022-23',
    session: 'B',
    language: 'eng',
    sourceFile: 'LA1_2022-23_MoedB_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2022-23' && q.examSession === 'B'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 0, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 0, 'dimension': 0, 'matrices': 1, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 0,
      'rank': 1, 'row-column-space': 0, 'other': 0
    },
    difficultyDistribution: { easy: 0, medium: 2, hard: 0 },
    totalPoints: 30,
    hasSolution: true,
  },
  {
    id: 'exam-2023-24-A',
    year: '2023-24',
    session: 'A',
    language: 'eng',
    sourceFile: 'LA1_2023-24_MoedA_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2023-24' && q.examSession === 'A'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 0, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 0, 'dimension': 0, 'matrices': 0, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 1,
      'rank': 0, 'row-column-space': 0, 'other': 2
    },
    difficultyDistribution: { easy: 0, medium: 1, hard: 2 },
    totalPoints: 65,
    hasSolution: true,
  },
  {
    id: 'exam-2023-24-B',
    year: '2023-24',
    session: 'B',
    language: 'eng',
    sourceFile: 'LA1_2023-24_MoedB_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2023-24' && q.examSession === 'B'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 0, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 1, 'dimension': 0, 'matrices': 1, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 0,
      'rank': 0, 'row-column-space': 0, 'other': 0
    },
    difficultyDistribution: { easy: 1, medium: 0, hard: 1 },
    totalPoints: 35,
    hasSolution: true,
  },
  {
    id: 'exam-2024-25-A',
    year: '2024-25',
    session: 'A',
    language: 'eng',
    sourceFile: 'LA1_2024-25_MoedA_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2024-25' && q.examSession === 'A'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 0, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 1, 'dimension': 1, 'matrices': 0, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 1,
      'rank': 0, 'row-column-space': 0, 'other': 1
    },
    difficultyDistribution: { easy: 1, medium: 3, hard: 0 },
    totalPoints: 60,
    hasSolution: true,
  },
  {
    id: 'exam-2024-25-B',
    year: '2024-25',
    session: 'B',
    language: 'eng',
    sourceFile: 'LA1_2024-25_MoedB_Eng.pdf',
    questions: examQuestions.filter(q => q.examYear === '2024-25' && q.examSession === 'B'),
    topicDistribution: {
      'fields': 0, 'complex-numbers': 0, 'linear-equations': 0, 'vector-spaces': 0,
      'subspaces': 0, 'linear-combinations': 0, 'span': 0, 'linear-independence': 0,
      'basis': 0, 'dimension': 0, 'matrices': 0, 'invertible-matrices': 0,
      'systems-of-equations': 0, 'row-reduction': 0, 'determinants': 1,
      'rank': 0, 'row-column-space': 0, 'other': 1
    },
    difficultyDistribution: { easy: 1, medium: 0, hard: 1 },
    totalPoints: 30,
    hasSolution: true,
  },
]

// Get most common topics across all exams
export function getMostCommonExamTopics(): { topic: string; count: number }[] {
  const topicCounts: Record<string, number> = {}

  for (const q of examQuestions) {
    topicCounts[q.topic] = (topicCounts[q.topic] || 0) + 1
  }

  return Object.entries(topicCounts)
    .map(([topic, count]) => ({ topic, count }))
    .sort((a, b) => b.count - a.count)
}

// Get questions by topic
export function getExamQuestionsByTopic(topic: string): ExamQuestion[] {
  return examQuestions.filter(q => q.topic === topic)
}

// Get questions by difficulty
export function getExamQuestionsByDifficulty(difficulty: 'easy' | 'medium' | 'hard'): ExamQuestion[] {
  return examQuestions.filter(q => q.difficulty === difficulty)
}
